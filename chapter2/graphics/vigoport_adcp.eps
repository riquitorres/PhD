%!PS-Adobe-2.0 EPSF-1.2
%%Creator: Gri2.6.4 (released 2001-06-23).  User=, commandfile=d:\programs\gri\gri\vectorseries_ts.gri
%%Title: d:\programs\gri\gri\vectorseries_ts.ps
%%CreationDate: Tue Nov 13 11:16:52 2001
%%Pages: (atend)
%%BoundingBox: 3 36 246 215
%%TemplateBox: 0 0 612 792
%%DocumentFonts: (atend)
%%Endcomments
% NOTE: The Gri postscript dictionary is being converted to the Adobe
% Illustrator 3.0 dialect of PostScript, as described in the Adobe
% documents stored at URL
%   http://www.adobe.com/Support/TechNotes.html
% (as of Jan 1996, this doc is number 5007).  When the conversion
% is complete, the Adobe Illustrator drawing program -- and any
% program compatible with AI -- will be able to edit Gri output.
%
% The IslandDraw (TM) program is able to read Gri output
% at this time; remarkably, it can read/edit arbitrary PostScript.
%
% The definitions below are presented in the same order as the Adobe
% manual.  The stack configuration before and after is shown in curly
% brackets.  All the operators are listed, but only some are defined
% here. Most things are faithful, except that no distinction is made
% between colors for stroking and filling paths.  The string 'WRONGLY'
% appears with commands that are approximations.
%
% PDF-style abbreviations:
/rg {setrgbcolor} def   % {red green blue}            {-} set RGB color
/RG {setrgbcolor} def   % {red green blue}            {-} set RGB color
/q {gsave} def
/Q {grestore} def
/W {clip} def
/W* {eoclip} def
%
% Gri-specific abbreviations:
/hsb {sethsbcolor} def  % {hue saturation brightness} {-} set HSB color
%
% Following all try to mimic Adobe Illustrator
%
% Mimicking section 5.1 of Adobe manual:
%A                      % {flag A}          {-} Determine whether
                        %                       following object can
                        %                       be selected. Flag=1
                        %                       prevents selection;
                        %                       flag=0 allows it.

% Mimicking section 5.2 of Adobe manual:
%u                      % {u}               {-} start group
%U                      % end group
%q                      % as 'u' but first item is a clip path
%Q                      % as 'U' but first item is a clip path

% Mimicking section 5.3 of Adobe manual:
/g {setgray} def        % {gray g}          {-} Set gray for fill
                        %                       path, WRONGLY used
                        %                       for stroking also. 
/G {setgray} def        % As 'g', but for filling path.
%k                      % Set cmyk color for filling path.
%K                      % As 'k', but for stroking path.
%x                      % Set cmyk custom color for filling path.
%X                      % As 'x' but for stroking path.
%p                      % Define pattern for filling path.
%P                      % As 'p' but for stroking path.
%O                      % Specify whether overprinting for fill paths
%R                      % As 'O' but for stroking path.

% Mimicking section 5.4 of Adobe manual:
/d {setdash} def        % {[array] phase d} {-} Set dash.
/i {setflat} def        % {flatness i}      {-} Set flatness.
/j {setlinejoin} def    % {linejoin j}      {-} Set line join.
/J {setlinecap} def     % {linecap J}       {-} Set line cap.
/M {setmiterlimit} def  % {miterlimit M}    {-} Set miter limit.
/w {setlinewidth} def   % {linewidth w}     {-} Set line width.

% Mimicking section 5.5 of Adobe manual:
/m {moveto} def         % {x y m}           {-} Move to locn
/l {lineto} def         % {x y l}           {-} Draw line to locn
                        %                       not a smooth point.
                        %                       WRONGLY, no
                        %                       distinction is made
                        %                       between smooth and
                        %                       corner. 
%L                      % {x y L}           {-} As 'l' but a corner
%c                      % Bezier curve to smooth point.
%C                      % As 'c' but to corner point.
%v                      % Something else to do with Bezier.
%V                      % 
%y                      % 
%Y                      % 

% Mimicking section 5.6 of Adobe manual:
%N                      % {N}               {-} As 'n' for nondrawn stuff
/n {newpath} def        % {n}               {-} WRONGLY interpreted
                        %                       as path constructor
/F {fill} def           % {F}               {-} Fill current path.
%f                      % {f}               {-} 'F' but close first
/S {stroke} def         % {S}               {-} Stroke current path.
%s                      % {s}               {-} 'S' but close first
%B                      % {B}               {-} As 's' but don't empty path.
%b                      % {b}               {-} As 'f' but don't empty path.
%H                      % no-op (weird huh?)
/h {closepath} def      % {h}               {-} Close  current path
%W                      % Used to create masks.

% Mimicking section 5.7 of Adobe manual:
%a                      % Begin text block ...
%e                      % Similar to 'a' but ...
%I                      % Similar to 'a' but ...
%o                      % Similar to 'a' but ...
%r                      % Similar to 'a' but ...
%t                      % {len (string) t}  {-} Render string.
%T                      % End block of text

% That's the end of the Illustrator stuff. Following are some Gri
% definitions which provide a temporary way of handling fonts. 
/sf {setfont} def       % {fontname sf}     {-} Set font name.
/sh {show} def          % {(text) sh}       {-} Show text.
/sc {scalefont} def     % {size sc}         {-} Scale font.
% Gri items which should be translated to Illustrator format:
/rl {rlineto} def
/rm {rmoveto} def
% Procedures
/cimdict 7 dict def
/cim {
 cimdict begin
 /cl exch def
 /rw exch def
 /yur exch def
 /xur exch def
 /yll exch def
 /xll exch def
 q
 xll yll translate
 xur xll sub yur yll sub scale
 /do cl 3 mul string def
 cl rw 8 [cl 0 0 rw neg 0 rw] {currentfile do readhexstring pop} false 3 colorimage
 Q
 end
} def
/imdict 14 dict def
/im {
 imdict begin
 /cl exch def
 /rw exch def
 /yur exch def
 /xur exch def
 /yll exch def
 /xll exch def
 /imagemap exch def
 q
 % Until version 2.6.0 used a 'settransfer' here, but that
 % triggers a bug in ps2pdf
 xll yll translate
 xur xll sub yur yll sub scale
 /do cl string def
 cl rw 8 [cl 0 0 rw neg 0 rw]
 {currentfile do readhexstring pop
  dup length 1 sub 0 1 3 -1 roll
    { 1 index exch
      2 copy get imagemap exch get 255 mul cvi put
    }
  for
 }image
 Q
 end
} bind def
/frdict  5 dict def
/fr {
 frdict begin
 /yt exch def
 /xr exch def
 /yb exch def
 /xl exch def
 n
 xl yb m
 xl yt l
 xr yt l
 xr yb l
 h
 F
 n
 end
} def
/plusdict 3 dict def
/_plus {
 plusdict begin
 dup 0.5 mul /t0 exch def
 /t1 exch def
 0 t0 rm
 0 t1 neg rl
 t0 neg t0 rm
 t1 0 rl
 t0 neg 0 rm
 end
} def
/timesdict 3 dict def
/_times {
 timesdict begin
 dup 0.353553 mul /t0 exch def
 0.707106 mul /t1 exch def
 t0 neg t0 rm
 t1 dup neg rl
 t1 neg 0 rm
 t1 dup rl
 t0 neg dup rm
 end
} def
/boxdict 3 dict def
/_box {
 boxdict begin
 dup 0.5 mul /t0 exch def
 1 mul /t1 exch def
 t0 neg t0 rm
 t1 0 rl
 0 t1 neg rl
 t1 neg 0 rl
 h
 t0 dup neg rm
 end
} def
/filledboxdict 3 dict def
/_filledbox {
 filledboxdict begin
 dup 0.5 mul /t0 exch def
 1 mul /t1 exch def
 t0 neg t0 rm
 t1 0 rl
 0 t1 neg rl
 t1 neg 0 rl
 h
 t0 dup neg rm
 F end
} def
/diamonddict 2 dict def
/_diamond {
 diamonddict begin
 0.5 mul /t0 exch def
 t0 neg 0 rm
 t0 dup rl
 t0 dup neg rl
 t0 neg dup rl
 h
 t0 0 rm
 end
} def
/filleddiamonddict 2 dict def
/_filleddiamond {
 filleddiamonddict begin
 0.5 mul /t0 exch def
 t0 neg 0 rm
 t0 dup rl
 t0 dup neg rl
 t0 neg dup rl
 h
 t0 0 rm
 F end
} def
/triangleupdict 5 dict def
/_triangleup {
 triangleupdict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t1 neg t0 neg rm
 t1 t2 rl
 t1 t2 neg rl
 h
 t1 t0 rm
 end
} def
/filledtriangleupdict 5 dict def
/_filledtriangleup {
 filledtriangleupdict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t1 neg t0 neg rm
 t1 t2 rl
 t1 t2 neg rl
 h
 t1 t0 rm
 F end
} def
/trianglerightdict 5 dict def
/_triangleright {
 trianglerightdict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t0 neg t1 rm
 t2 t1 neg rl
 t2 neg t1 neg rl
 h
 t0 t1 neg rm
 end
} def
/filledtrianglerightdict 5 dict def
/_filledtriangleright {
 filledtrianglerightdict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t0 neg t1 rm
 t2 t1 neg rl
 t2 neg t1 neg rl
 h
 t0 t1 neg rm
 F end
} def
/triangledowndict 5 dict def
/_triangledown {
 triangledowndict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t1 neg t0 rm
 t3 0 rl
 t1 neg t2 neg rl
 h
 t1 t0 neg rm
 end
} def
/filledtriangledowndict 5 dict def
/_filledtriangledown {
 filledtriangledowndict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t1 neg t0 rm
 t3 0 rl
 t1 neg t2 neg rl
 h
 t1 t0 neg rm
 F end
} def
/triangleleftdict 5 dict def
/_triangleleft {
 triangleleftdict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t0 t1 rm
 0 t3 neg rl
 t2 neg t1 rl
 h
 t0 neg t1 neg rm
 end
} def
/filledtriangleleftdict 5 dict def
/_filledtriangleleft {
 filledtriangleleftdict begin
 dup 0.25 mul /t0 exch def
 dup 0.433013 mul /t1 exch def
 dup 0.75 mul /t2 exch def
 0.866026 mul /t3 exch def
 t0 t1 rm
 0 t3 neg rl
 t2 neg t1 rl
 h
 t0 neg t1 neg rm
 F end
} def
/circdict 5 dict def
/_circ {
 circdict begin
 0.5 mul /t0 exch def
 currentpoint
 /t2 exch def
 /t1 exch def
 S n t1 t2 t0 0 360 arc
 t1 t2 m
 end
} def
/bulldict 3 dict def
/_bull {
 bulldict begin
 0.5 mul /r exch def
 currentpoint /y exch def /x exch def
 S n x y r 0 360 arc h F S
 end
} def
/filledhalfmoonupdict 3 dict def
/_filledhalfmoonup {
 bulldict begin
 0.5 mul /r exch def
 currentpoint /y exch def /x exch def
 S n x y r 0 180 arc h F S
 end
} def
/filledhalfmoondowndict 3 dict def
/_filledhalfmoondown {
 bulldict begin
 0.5 mul /r exch def
 currentpoint /y exch def /x exch def
 S n x y r 180 360 arc h F S
 end
} def
1 1 scale
10.0 M
1 j
/Courier findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Courier-ISOLatin1 exch definefont pop
/Courier-Oblique findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Courier-Oblique-ISOLatin1 exch definefont pop
/Courier-Bold findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Courier-Bold-ISOLatin1 exch definefont pop
/Courier-BoldOblique findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Courier-BoldOblique-ISOLatin1 exch definefont pop
/Helvetica findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Helvetica-ISOLatin1 exch definefont pop
/Helvetica-Bold findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Helvetica-Bold-ISOLatin1 exch definefont pop
/Helvetica-Oblique findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Helvetica-Oblique-ISOLatin1 exch definefont pop
/Palatino-Roman findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Palatino-Roman-ISOLatin1 exch definefont pop
/Palatino-Italic findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Palatino-Italic-ISOLatin1 exch definefont pop
/Palatino-Bold findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Palatino-Bold-ISOLatin1 exch definefont pop
/Palatino-BoldItalic findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Palatino-BoldItalic-ISOLatin1 exch definefont pop
/Symbol findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Symbol-ISOLatin1 exch definefont pop
/Times-Roman findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Times-Roman-ISOLatin1 exch definefont pop
/Times-Italic findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Times-Italic-ISOLatin1 exch definefont pop
/Times-Bold findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Times-Bold-ISOLatin1 exch definefont pop
/Times-BoldItalic findfont dup length dict begin
  {1 index /FID ne {def} {pop pop} ifelse } forall
  /Encoding ISOLatin1Encoding def
  currentdict
end
/Times-BoldItalic-ISOLatin1 exch definefont pop
%%EndProlog
%%Page: 1 1
/Helvetica-ISOLatin1 findfont 12.00 sc sf
%gri:# Gri was invoked by user named
%gri:#     
%gri:# on host named
%gri:#     unknown
%gri:# using the command
%gri:#    gri -p d:\programs\gri\gri\vectorseries_ts.gri
%gri:# at time Tue Nov 13 11:16:52 2001.
%gri://expecting version 2.050
%gri:// vectorseries_ts.gri plots ts data with overlaid sigma-t or spiciness curves
%gri:// Set missing value (end of curve) to 999. Corrected for watermasses drawing
%gri:set missing value 999.000
%gri://
%gri:if ..debug..
%gri:..trace.. = 1
%gri:end if
%gri:
%gri:// Define  control file
%gri:
%gri:\CON_DATA = "vectorseries_ts.con"
%gri:query \conf "Control file?  " ("\CON_DATA")
%gri:
%gri:open "\conf"
%gri:skip 5
%gri:read \orientation
%gri:read .fac.
%gri:read .noofgrphs.
%gri:read .noofrows.
%gri:skip
%gri: 
%gri:// Font size and axis line width
%gri:read  .axfontsiz. .axlw.
%gri:
%gri:// Set up the x axis.
%gri:read .xsiz.
%gri:read .xoffset.
%gri:read  line \xlab 
%gri:read .xmin. 
%gri:read .xmax. 
%gri:read .xtic. 
%gri:read .xtic2.
%gri:
%gri:// Set up the y axis.
%gri:read .ysiz.
%gri:read .yoffset.
%gri:read  line \ylab 
%gri:read .ymin. .ypos1.
%gri:read .ymax. .ypos2.
%gri:read .ytic. .arrowtype.
%gri:read .ytic2. .arrowscale. 
%gri:skip
%gri:
%gri:show "++++++++++++++++++++++ Read axis info ++++++++++++++++++++++"
%gri:
%gri:set page \orientation
%gri:set page factor .fac.
1 1 scale
%gri:
%gri:set line width axis .axlw.
%gri:set font size .axfontsiz.
%gri:set font to Times
/Times-Roman-ISOLatin1 findfont 13.00 sc sf
%gri:set x size .xsiz.
%gri:set x margin .xoffset.
%gri:set x axis .xmin. .xmax. .xtic. .xtic2.
%gri:set x name \xlab
%gri:set y size .ysiz.
%gri:set y margin .yoffset. 
%gri:set y axis .ymin. .ymax. .ytic. .ytic2.
%gri:set y name \ylab
%gri:draw x axis 
% gr_show_at() BEGIN
0 g
0 G
85.8 54.3 m () sh
(\255) sh
(9.2) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
189.9 54.3 m () sh
(\255) sh
(9) sh
% gr_show_at() END
0 g
0 G
1.0 i 0 J 0 j 1.407 w 10.0 M [] 0 d
45.52 73.97 m
45.52 73.97 l
45.52 71.13 l
45.52 73.97 l
95.31 73.97 l
95.31 68.28 l
95.31 73.97 l
145.10 73.97 l
145.10 71.13 l
145.10 73.97 l
194.88 73.97 l
194.88 68.28 l
194.88 73.97 l
244.67 73.97 l
244.67 71.13 l
244.67 73.97 l
244.77 73.97 l
S
% END GriPath stroke/fill
% gr_show_at() BEGIN
0 g
0 G
113.2 40.4 m (Longitude W) sh
% gr_show_at() END
%gri:draw y axis 
% gr_show_at() BEGIN
0 g
0 G
18.4 70.0 m () sh
(\255) sh
(40) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
18.4 87.1 m () sh
(\255) sh
(30) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
18.4 104.1 m () sh
(\255) sh
(20) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
18.4 121.2 m () sh
(\255) sh
(10) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
28.4 138.3 m (0) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
22.4 155.3 m (10) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
22.4 172.4 m (20) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
22.4 189.5 m (30) sh
% gr_show_at() END
% gr_show_at() BEGIN
0 g
0 G
22.4 206.5 m (40) sh
% gr_show_at() END
0 g
0 G
1.0 i 0 J 0 j 1.407 w 10.0 M [] 0 d
45.52 73.97 m
45.52 73.97 l
39.83 73.97 l
45.52 73.97 l
45.52 82.50 l
42.67 82.50 l
45.52 82.50 l
45.52 91.04 l
39.83 91.04 l
45.52 91.04 l
45.52 99.58 l
42.67 99.58 l
45.52 99.58 l
45.52 108.11 l
39.83 108.11 l
45.52 108.11 l
45.52 116.64 l
42.67 116.64 l
45.52 116.64 l
45.52 125.18 l
39.83 125.18 l
45.52 125.18 l
45.52 133.72 l
42.67 133.72 l
45.52 133.72 l
45.52 142.25 l
39.83 142.25 l
45.52 142.25 l
45.52 150.79 l
42.67 150.79 l
45.52 150.79 l
45.52 159.32 l
39.83 159.32 l
45.52 159.32 l
45.52 167.86 l
42.67 167.86 l
45.52 167.86 l
45.52 176.39 l
39.83 176.39 l
45.52 176.39 l
45.52 184.93 l
42.67 184.93 l
45.52 184.93 l
45.52 193.46 l
39.83 193.46 l
45.52 193.46 l
45.52 202.00 l
42.67 202.00 l
45.52 202.00 l
45.52 210.53 l
39.83 210.53 l
45.52 210.53 l
45.52 210.53 l
S
% END GriPath stroke/fill
% gr_show_at() BEGIN
0 g
0 G
13.0 104.6 m 90.00 rotate (Velocity \(cm/s\)) sh
-90.00 rotate % gr_show_at() END
%gri:
%gri:show "++++++++++++++++++++++ drawn axes ++++++++++++++++++++++"
%gri:
%gri:// Loop around no of graphs
%gri:// Set loop parameter
%gri:.loop. = 1
%gri:.nloops. = {rpn .noofgrphs. .noofrows. * 1 +}
%gri:.rowloop. = 0
%gri:while {rpn .loop. .nloops. >}
%gri:
%gri:show "Entered loop" .loop. " of " {rpn .noofgrphs. .noofrows. *}
%gri:
%gri:// Read line and symbol parameters
%gri:read .lwidth. \lcolor \lcolor2 .ndash. .ndash2.
%gri:read .symb. .ssize. \scolor .decint.
%gri:
%gri:if ..debug..
%gri:show "Line and symbol parameters \lcolor \scolor"
%gri:end if
%gri:
%gri:// Open data file
%gri:read line \data
%gri:read line \data2
%gri:read \xcol \ycol
%gri:read \ucol \vcol
%gri:
%gri:open \data
%gri:read columns x=\xcol y=\ycol u=\ucol v=\vcol
%gri:y = {rpn y 0 * 1 +}
%gri:y = {rpn y .ypos1. *}
%gri:show "reading ADCP data \data"
%gri:close
%gri:
%gri:
%gri:// check if it is the second run or higher so it calculates the graph offset!
%gri:if { rpn .rowloop. 0 ==}
%gri:if { rpn 2 .loop. >=  }
%gri:.graph. = {rpn .loop. 1 -}
%gri:.xoffset. = {rpn .xsiz. 1 + .graph. * .xoffset. +}
%gri:show .xoffset.
%gri:
%gri:set x margin .xoffset.
%gri:
%gri:set y name " "
%gri:
%gri:draw x axis  
%gri:draw y axis 
%gri:
%gri:end if
%gri:end if
%gri:
%gri:if { rpn 3 .loop. >=  }
%gri:.graph. = {rpn .loop. .noofgrphs. - 1 -}
%gri:.xoffset. = {rpn .xsiz. 1 + .graph. * .xoffset. +}
%gri:show .xoffset.
%gri:set x margin .xoffset.
%gri:set y name " "
%gri:draw x axis   
%gri:draw y axis 
%gri:show columns statistics
%gri:end if
%gri:
%gri:set clip postscript on 
%gri:set color \lcolor
%gri:
%gri:// draw current vectors
%gri:// notice that adcp files have positive longitude (E or W) but others have
%gri:// true latitude (i.e negative for values W)
%gri:
%gri:set missing value 999.99
%gri:u /= 100
%gri:v /= 100
%gri:set u scale .arrowscale.
%gri:set v scale .arrowscale.
%gri:set arrow size 0.06
%gri:
%gri:if .arrowtype. 
%gri:  set line width 1.701
%gri:  set color white
%gri:  draw arrows
%gri:  set color \lcolor
%gri:  set line width 0.992
%gri:else
%gri:  set line width 1.701
%gri:end if  //arrowtype
%gri:draw arrows
%gri:
%gri:set line width default
%gri:
%gri:show "-------------------- Current vectors complete --------------------"
%gri:set color black
%gri:
%gri:// reading the second column for the same graph, no need to 
%gri:// redraw the y axis, only the offset x axis
%gri:set clip postscript off
%gri:
%gri://set y axis .ymin. .ymax. .ytic21. .ytic22.
%gri://set y name \ylab2
%gri://draw y axis at right
%gri:
%gri:open "\data2"
%gri:show "reading ctd data \data2"
%gri:read columns x=\xcol y=\ycol u=\ucol v=\vcol   
%gri:y = {rpn y 0 * 1 +}
%gri:y = {rpn y .ypos2. *}
%gri:close
%gri:set clip postscript on
%gri:
%gri://draw curve2 - none drawn if \lcolor is white or .lwidth. =0
%gri:set line width .lwidth.
%gri:set color \lcolor2
%gri:set dash .ndash2.
%gri:if {rpn 0 .lwidth. >}
%gri:u /= 100
%gri:v /= 100
%gri:set u scale .arrowscale.
%gri:set v scale .arrowscale.
%gri:set arrow size 0.06
%gri:
%gri:if .arrowtype. 
%gri:  set line width 1.701
%gri:  set color white
%gri:  draw arrows
%gri:  set color \lcolor2
%gri:  set line width 0.992
%gri:else
%gri:  set line width 1.701
%gri:end if  //arrowtype
%gri:draw arrows
%gri:
%gri:set line width default
%gri:
%gri:show "-------------------- Current vectors complete --------------------"
%gri:set color black
%gri:end if
%gri:set line width default
%gri:set dash off
%gri:set color black
%gri:
%gri:
%gri:set clip postscript off
%gri:
%gri:// clean out re-read synonyms
%gri:delete \lcolor  \lcolor2
%gri:
%gri:
%gri:if { rpn .loop. .noofgrphs. ==}
%gri:.rowloop. = 1
%gri://.yoffset. =  .yoff. 
%gri://.yoffset. = {rpn .yoff. .ysiz. - 2 -}
%gri:set x margin .xoffset.
%gri:set y margin .yoffset.
%gri:set y axis .ymin. .ymax. .ytic. .ytic2. 	//35 36 0.5 0.5 -7 0 1 1Dissipation (Log$\epsilon$)
%gri:set y name \ylab
%gri:set x name \xlab
%gri://draw x axis 
%gri://draw y axis
%gri:end if 
%gri:
%gri:
%gri:
%gri:.loop. += 1
%gri:
%gri:end while
%^ scale 1 45.52 -9.3 497.875 1 73.97 -40 1.707
q n % turn clipping on
45.520000 73.970000 moveto
244.670000 73.970000 lineto
244.670000 210.530000 lineto
45.520000 210.530000 lineto
h W
n % turn clipping on
%^ scale 1 45.52 -9.3 497.875 1 73.97 -40 1.707
1.701 w
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
189.10 146.52 m
177.07 161.95 l
178.87 156.86 m
177.07 161.95 l
181.56 158.96 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
183.67 146.52 m
170.41 165.39 l
171.96 160.22 m
170.41 165.39 l
174.75 162.18 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
177.50 146.52 m
157.99 165.88 l
160.42 161.06 m
157.99 165.88 l
162.82 163.48 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
170.26 146.52 m
150.98 170.46 l
152.87 165.40 m
150.98 170.46 l
155.52 167.54 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
162.51 146.52 m
139.12 179.36 l
140.70 174.20 m
139.12 179.36 l
143.48 176.18 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
154.58 146.52 m
128.71 180.32 l
130.46 175.22 m
128.71 180.32 l
133.17 177.29 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
146.74 146.52 m
117.18 184.99 l
118.94 179.89 m
117.18 184.99 l
121.65 181.97 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
138.71 146.52 m
105.37 184.80 l
107.45 179.82 m
105.37 184.80 l
110.02 182.06 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
130.80 146.52 m
105.27 175.63 l
107.37 170.66 m
105.27 175.63 l
109.93 172.91 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
122.94 146.52 m
99.77 173.74 l
101.79 168.73 m
99.77 173.74 l
104.39 170.94 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
115.08 146.52 m
94.20 167.98 l
96.54 163.12 m
94.20 167.98 l
98.99 165.50 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
107.10 146.52 m
88.54 171.14 l
90.26 166.02 m
88.54 171.14 l
92.98 168.08 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
99.23 146.52 m
83.26 173.37 l
84.41 168.10 m
83.26 173.37 l
87.34 169.84 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
91.31 146.52 m
75.08 166.66 l
76.96 161.60 m
75.08 166.66 l
79.62 163.74 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
83.74 146.52 m
73.34 162.81 l
74.65 157.58 m
73.34 162.81 l
77.53 159.42 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
76.18 146.52 m
70.93 160.23 l
71.17 154.84 m
70.93 160.23 l
74.35 156.06 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
68.86 146.52 m
68.76 159.30 l
67.09 154.16 m
68.76 159.30 l
70.51 154.19 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
61.41 146.52 m
57.42 156.05 l
57.82 150.67 m
57.42 156.05 l
60.97 151.99 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
54.00 146.52 m
50.03 156.16 l
50.40 150.77 m
50.03 156.16 l
53.55 152.07 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
46.41 146.52 m
38.04 156.79 l
39.95 151.75 m
38.04 156.79 l
42.59 153.90 l
S
% END GriPath stroke/fill
1 0 0 rg
1 0 0 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
38.81 146.52 m
28.29 157.07 l
30.70 152.24 m
28.29 157.07 l
33.11 154.65 l
S
% END GriPath stroke/fill
S Q % turn clipping off
%^ scale 1 45.52 -9.3 497.875 1 73.97 -40 1.707
q n % turn clipping on
45.520000 73.970000 moveto
244.670000 73.970000 lineto
244.670000 210.530000 lineto
45.520000 210.530000 lineto
h W
n % turn clipping on
%^ scale 1 45.52 -9.3 497.875 1 73.97 -40 1.707
1.701 w
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
236.11 137.98 m
228.85 141.00 l
232.92 137.46 m
228.85 141.00 l
234.23 140.61 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
229.18 137.98 m
217.47 129.77 l
222.64 131.31 m
217.47 129.77 l
220.68 134.11 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
221.80 137.98 m
213.08 121.52 l
216.98 125.25 m
213.08 121.52 l
213.97 126.85 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
214.57 137.98 m
206.56 118.54 l
210.09 122.63 m
206.56 118.54 l
206.93 123.93 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
207.32 137.98 m
203.78 107.13 l
206.06 112.02 m
203.78 107.13 l
202.67 112.41 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
199.34 137.98 m
200.22 102.69 l
201.80 107.85 m
200.22 102.69 l
198.39 107.77 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
190.80 137.98 m
188.78 102.41 l
190.77 107.43 m
188.78 102.41 l
187.36 107.62 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
182.60 137.98 m
189.99 98.47 l
190.73 103.81 m
189.99 98.47 l
187.37 103.19 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
174.43 137.98 m
193.26 88.78 l
193.02 94.17 m
193.26 88.78 l
189.83 92.95 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
167.48 137.98 m
186.00 83.81 l
185.96 89.21 m
186.00 83.81 l
182.73 88.10 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
161.99 137.98 m
181.72 80.46 l
181.68 85.86 m
181.72 80.46 l
178.45 84.75 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
155.57 137.98 m
179.50 73.65 l
179.31 79.05 m
179.50 73.65 l
176.11 77.86 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
148.70 137.98 m
168.84 75.44 l
168.90 80.84 m
168.84 75.44 l
165.65 79.79 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
141.83 137.98 m
166.33 74.85 l
166.07 80.24 m
166.33 74.85 l
162.89 79.01 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
135.07 137.98 m
161.41 83.62 l
160.71 88.97 m
161.41 83.62 l
157.64 87.48 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
128.19 137.98 m
158.92 84.44 l
157.85 89.73 m
158.92 84.44 l
154.89 88.03 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
121.45 137.98 m
152.42 87.81 l
151.18 93.07 m
152.42 87.81 l
148.28 91.27 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
114.66 137.98 m
143.94 94.50 l
142.49 99.71 m
143.94 94.50 l
139.66 97.80 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
108.29 137.98 m
141.84 96.30 l
139.96 101.36 m
141.84 96.30 l
137.30 99.22 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
102.10 137.98 m
136.19 96.90 l
134.23 101.93 m
136.19 96.90 l
131.60 99.75 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
95.71 137.98 m
132.52 94.27 l
130.53 99.29 m
132.52 94.27 l
127.92 97.09 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
88.76 137.98 m
127.88 95.47 l
125.67 100.39 m
127.88 95.47 l
123.16 98.08 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
81.62 137.98 m
124.26 98.48 l
121.66 103.21 m
124.26 98.48 l
119.34 100.70 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
74.34 137.98 m
115.30 96.38 l
112.93 101.23 m
115.30 96.38 l
110.49 98.83 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
66.89 137.98 m
105.35 102.61 l
102.74 107.33 m
105.35 102.61 l
100.43 104.82 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
59.84 137.98 m
90.82 109.56 l
88.20 114.28 m
90.82 109.56 l
85.89 111.76 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
53.29 137.98 m
80.47 114.95 l
77.67 119.57 m
80.47 114.95 l
75.46 116.96 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
46.68 137.98 m
62.62 116.25 l
60.97 121.39 m
62.62 116.25 l
58.22 119.37 l
S
% END GriPath stroke/fill
0 0 1 rg
0 0 1 RG
1.0 i 0 J 1 j 1.701 w 10.0 M [] 0 d
40.19 137.98 m
58.76 114.22 l
56.95 119.31 m
58.76 114.22 l
54.26 117.21 l
S
% END GriPath stroke/fill
[] 0 d
S Q % turn clipping off
%gri:close
%gri:show "++++++++++++++++++++++ TS plots drawn ++++++++++++++++++++++"
%gri:
%gri:
%gri:
%gri:open "\conf"
%gri: skip 87
%gri:
%gri:read .nlabs.
%gri:show .nlabs.
%gri://.nlabs. = {rpn .nlabs. 1 +}
%gri:.labloop. = 0
%gri:while {rpn .labloop. .nlabs. >}
%gri:  read line \lab
%gri:  read \colr
%gri:  read .lsiz. .lx. .ly. .lrot.
%gri:  set font size .lsiz.
%gri:  set color "\colr"
%gri:  draw label "\lab" centered at .lx. .ly. rotated .lrot.
%gri:  .labloop. = {rpn .labloop. 1 +}
%gri:end while
%gri:set font size default
%gri:set color black
%gri:close
%gri:show "+++++++++++++++++++++ Labels drawn ++++++++++++++++++++++++++"
%gri:
%gri:
%gri:if ..debug..
%gri:	show all
%gri:end if
%gri:
%gri:
%gri:if !..publication..
%gri:draw time stamp
%gri:set font size 8
%gri:draw essay "Control file \conf"
%gri:draw essay "Datafile \data"
%gri:end if
%gri:
%gri:quit
showpage
%%Trailer
%%BoundingBox: 3 36 247 217
%%DocumentFonts: Courier Helvetica Palatino-Roman Palatino-Italic Symbol Times-Roman
%%Pages: 1
